# Configuration file for the pipeline client.

# Command to copy a file to the server for processing.
# The following placeholders are replaced:
# - `{{client_path}}` is the absolute path of the file on the client, see
#   the `[watching]` section for how files are discovered;
# - `{{server_filename}}` is the name of the file as expected by the pipeline.
#
# This `copy_to_server` command must result in the file being copied to the
# `incoming_directory` (see the server configuration) with file name
# `{{server_filename}}`.
#
# If the server filesystem is mounted locally, you can ask pipeline to copy the
# file instead of relying on an external process. For instance, the copy in the
# example command can be more efficiently achieved with
# copy_to_server = {{ destination = "./server" }}
copy_to_server = [
    "cp",
    "{{client_path}}",
    "./server/{{server_filename}}",
]

# Location of the pipeline server, communication occurs via TCP.
{server_conf}

# Configure how file to process are discovered.
[watching]
# Path of the directory to watch for new files.
directory = "./client"
# The extension of files to process.
extension = "mrc"
# How long ago the last modification should be (in seconds) for the file to be
# considered ready for processing.
last_modif_secs = 10
# How often the client should look for new files in the watched directory, in
# seconds.
refresh_every_secs = 5
